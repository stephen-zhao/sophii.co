{"version":3,"sources":["webpack://Avoidance/webpack/bootstrap","webpack://Avoidance/./src/avoidance.js"],"names":["Avoidance","containerSelector","options","addChildrenAsParticles","containersCollection","document","querySelectorAll","containers","Array","prototype","slice","call","initOptions","trackedParticles","trackedParticleElementsSet","Set","mouseMoveHandler","bind","mouseClickTestHandler","forEach","container","i","children","length","startTrackingParticleElement","status","userOptions","factorMethod","calculateAvoidanceFactor","builtinMethods","name","scale","undefined","offset","power","displacementMethod","calculateAvoidanceDisplacement","thresholdRadius","particleSelector","particleElement","stopTrackingParticleElements","stopTrackingParticleElement","has","particle","Particle","push","add","foundIdx","findIndex","element","dispose","splice","particleElements","particleElementSet","filter","registerEventHandlers","deregisterEventHandlers","idx","indexOf","removeChildrenAsParticles","addEventListener","removeEventListener","event","currentTarget","containerSizeScalar","geometry","getRadius","x","offsetWidth","y","offsetHeight","mousePos","pageX","offsetLeft","pageY","offsetTop","particleSize","width","height","particleOrigPosToCentreRelMouse","originalPos","particleOrigDistToCentreRelMouse","avoidanceFactor","NaN","style","display","avoidanceDisplacement","particleNewPos","left","top","datastring","map","particleString","id","getAttribute","join","alert","originalDistance","elementSize","method","methodFn","power_inverse","particleOrigPosRelMouse","absolute_threshold","getDistance","pointA","pointB","Math","sqrt","pow","point","inverse","param_scale","param_offset","param_power","exponential","exp","param_threshold_radius","origRadius","scaleFactor","proportional_threshold","standard","dom","pageOffset","rect","getBoundingClientRect","scrollLeft","window","pageXOffset","documentElement","scrollTop","pageYOffset","getCentre","relativeTo"],"mappings":";QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;;;;;;;AClFA;AACA;AACA;AAEA;AACA;AAEA;IACqBA,S;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAYC,iBAAZ,EAA4E;AAAA,QAA7CC,OAA6C,uEAAnC,EAAmC;AAAA,QAA/BC,sBAA+B,uEAAN,IAAM;;AAAA;;AAC1E;AACA,QAAIC,oBAAoB,GAAGC,QAAQ,CAACC,gBAAT,CAA0BL,iBAA1B,CAA3B;AACA,SAAKM,UAAL,GAAkBC,KAAK,CAACC,SAAN,CAAgBC,KAAhB,CAAsBC,IAAtB,CAA2BP,oBAA3B,CAAlB,CAH0E,CAI1E;;AACA,SAAKF,OAAL,GAAe,KAAKU,WAAL,CAAiBV,OAAjB,CAAf,CAL0E,CAM1E;;AACA,SAAKW,gBAAL,GAAwB,EAAxB;AACA,SAAKC,0BAAL,GAAkC,IAAIC,GAAJ,EAAlC,CAR0E,CAS1E;;AACA,SAAKC,gBAAL,GAAwB,KAAKA,gBAAL,CAAsBC,IAAtB,CAA2B,IAA3B,CAAxB;AACA,SAAKC,qBAAL,GAA6B,KAAKA,qBAAL,CAA2BD,IAA3B,CAAgC,IAAhC,CAA7B,CAX0E,CAY1E;AACA;;AACA,QAAId,sBAAJ,EAA4B;AAC1B,WAAKI,UAAL,CAAgBY,OAAhB,CAAwB,UAAUC,SAAV,EAAqB;AAC3C,aAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,SAAS,CAACE,QAAV,CAAmBC,MAAvC,EAA+C,EAAEF,CAAjD,EAAoD;AAClD,eAAKG,4BAAL,CAAkCJ,SAAS,CAACE,QAAV,CAAmBD,CAAnB,CAAlC;AACD;AACF,OAJD,EAIG,IAJH;AAKD,KApByE,CAqB1E;;;AACA,SAAKI,MAAL,GAAc,OAAd;AACD;;;;gCAEWC,W,EAAa;AACvB,UAAIxB,OAAO,GAAG,EAAd,CADuB,CAGvB;;AACAA,aAAO,CAACyB,YAAR,GAAuB,EAAvB;;AACA,UAAI,kBAAkBD,WAAtB,EAAmC;AACjC,YAAI,OAAOA,WAAW,CAACC,YAAnB,KAAoC,QAApC,IACID,WAAW,CAACC,YAAZ,IAA4B3B,SAAS,CAAC4B,wBAAV,CAAmCC,cADvE,EACwF;AACtF3B,iBAAO,CAACyB,YAAR,CAAqBG,IAArB,GAA4BJ,WAAW,CAACC,YAAxC;AACAzB,iBAAO,CAACyB,YAAR,CAAqBI,KAArB,GAA6BC,SAA7B;AACA9B,iBAAO,CAACyB,YAAR,CAAqBM,MAArB,GAA8BD,SAA9B;AACA9B,iBAAO,CAACyB,YAAR,CAAqBO,KAArB,GAA6BF,SAA7B;AACD,SAND,MAOK,IAAI,QAAON,WAAW,CAACC,YAAnB,MAAoC,QAAxC,EAAkD;AACrD,cAAK,UAAUD,WAAW,CAACC,YAAvB,IACI,OAAOD,WAAW,CAACC,YAAZ,CAAyBG,IAAhC,KAAyC,QAD7C,IAEIJ,WAAW,CAACC,YAAZ,CAAyBG,IAAzB,IAAiC9B,SAAS,CAAC4B,wBAAV,CAAmCC,cAF5E,EAE6F;AAC3F3B,mBAAO,CAACyB,YAAR,CAAqBG,IAArB,GAA4BJ,WAAW,CAACC,YAAZ,CAAyBG,IAArD;AACD,WAJD,MAKK;AACH5B,mBAAO,CAACyB,YAAR,CAAqBG,IAArB,GAA4BE,SAA5B;AACD;;AACD,cAAK,WAAWN,WAAW,CAACC,YAAxB,IACI,OAAOD,WAAW,CAACC,YAAZ,CAAyBI,KAAhC,KAA0C,QADlD,EAC6D;AAC3D7B,mBAAO,CAACyB,YAAR,CAAqBI,KAArB,GAA6BL,WAAW,CAACC,YAAZ,CAAyBI,KAAtD;AACD,WAHD,MAIK;AACH7B,mBAAO,CAACyB,YAAR,CAAqBI,KAArB,GAA6BC,SAA7B;AACD;;AACD,cAAK,YAAYN,WAAW,CAACC,YAAzB,IACI,OAAOD,WAAW,CAACC,YAAZ,CAAyBM,MAAhC,KAA2C,QADnD,EAC8D;AAC5D/B,mBAAO,CAACyB,YAAR,CAAqBM,MAArB,GAA8BP,WAAW,CAACC,YAAZ,CAAyBM,MAAvD;AACD,WAHD,MAIK;AACH/B,mBAAO,CAACyB,YAAR,CAAqBM,MAArB,GAA8BD,SAA9B;AACD;;AACD,cAAK,WAAWN,WAAW,CAACC,YAAxB,IACI,OAAOD,WAAW,CAACC,YAAZ,CAAyBO,KAAhC,KAA0C,QADlD,EAC6D;AAC3DhC,mBAAO,CAACyB,YAAR,CAAqBO,KAArB,GAA6BR,WAAW,CAACC,YAAZ,CAAyBO,KAAtD;AACD,WAHD,MAIK;AACHhC,mBAAO,CAACyB,YAAR,CAAqBO,KAArB,GAA6BF,SAA7B;AACD;AACF,SA9BI,MA+BA;AACH9B,iBAAO,CAACyB,YAAR,CAAqBG,IAArB,GAA4BE,SAA5B;AACA9B,iBAAO,CAACyB,YAAR,CAAqBI,KAArB,GAA6BC,SAA7B;AACA9B,iBAAO,CAACyB,YAAR,CAAqBM,MAArB,GAA8BD,SAA9B;AACA9B,iBAAO,CAACyB,YAAR,CAAqBO,KAArB,GAA6BF,SAA7B;AACD;AACF,OAlDsB,CAoDvB;;;AACA9B,aAAO,CAACiC,kBAAR,GAA6B,EAA7B;;AACA,UAAI,wBAAwBT,WAA5B,EAAyC;AACvC,YAAI,OAAOA,WAAW,CAACS,kBAAnB,KAA0C,QAA1C,IACIT,WAAW,CAACS,kBAAZ,IAAkCnC,SAAS,CAACoC,8BAAV,CAAyCP,cADnF,EACoG;AAClG3B,iBAAO,CAACiC,kBAAR,CAA2BL,IAA3B,GAAkCJ,WAAW,CAACS,kBAA9C;AACAjC,iBAAO,CAACiC,kBAAR,CAA2BE,eAA3B,GAA6CL,SAA7C;AACD,SAJD,MAKK,IAAI,QAAON,WAAW,CAACS,kBAAnB,MAA0C,QAA9C,EAAwD;AAC3D,cAAK,UAAUT,WAAW,CAACS,kBAAvB,IACI,OAAOT,WAAW,CAACS,kBAAZ,CAA+BL,IAAtC,KAA+C,QADnD,IAEIJ,WAAW,CAACS,kBAAZ,CAA+BL,IAA/B,IAAuC9B,SAAS,CAACoC,8BAAV,CAAyCP,cAFxF,EAEyG;AACvG3B,mBAAO,CAACiC,kBAAR,CAA2BL,IAA3B,GAAkCJ,WAAW,CAACS,kBAAZ,CAA+BL,IAAjE;AACD,WAJD,MAKK;AACH5B,mBAAO,CAACiC,kBAAR,CAA2BL,IAA3B,GAAkCE,SAAlC;AACD;;AACD,cAAK,qBAAqBN,WAAW,CAACS,kBAAlC,IACI,OAAOT,WAAW,CAACS,kBAAZ,CAA+BE,eAAtC,KAA0D,QADlE,EAC6E;AAC3EnC,mBAAO,CAACiC,kBAAR,CAA2BE,eAA3B,GAA6CX,WAAW,CAACS,kBAAZ,CAA+BE,eAA5E;AACD,WAHD,MAIK;AACHnC,mBAAO,CAACiC,kBAAR,CAA2BE,eAA3B,GAA6CL,SAA7C;AACD;AACF,SAhBI,MAiBA;AACH9B,iBAAO,CAACiC,kBAAR,CAA2BL,IAA3B,GAAkCE,SAAlC;AACA9B,iBAAO,CAACiC,kBAAR,CAA2BE,eAA3B,GAA6CL,SAA7C;AACD;AACF;;AAED,aAAO9B,OAAP;AACD;;;iCAEYoC,gB,EAAkB;AAC7BjC,cAAQ,CAACC,gBAAT,CAA0BgC,gBAA1B,EAA4CnB,OAA5C,CAAoD,KAAKK,4BAAzD,EAAuF,IAAvF;AACD;;;uCAEkBe,e,EAAiB;AAClC,WAAKf,4BAAL,CAAkCe,eAAlC;AACD;;;oCAEeD,gB,EAAkB;AAChC,WAAKE,4BAAL,CAAkCnC,QAAQ,CAACC,gBAAT,CAA0BgC,gBAA1B,CAAlC;AACD;;;0CAEqBC,e,EAAiB;AACrC,WAAKE,2BAAL,CAAiCF,eAAjC;AACD;;;iDAE4BA,e,EAAiB;AAC5C,UAAI,CAAC,KAAKzB,0BAAL,CAAgC4B,GAAhC,CAAoCH,eAApC,CAAL,EAA2D;AACzD,YAAII,QAAQ,GAAG,IAAI3C,SAAS,CAAC4C,QAAd,CAAuBL,eAAvB,CAAf;AACA,aAAK1B,gBAAL,CAAsBgC,IAAtB,CAA2BF,QAA3B;AACA,aAAK7B,0BAAL,CAAgCgC,GAAhC,CAAoCP,eAApC;AACD;AACF;;;gDAE2BA,e,EAAiB;AAC3C,UAAI,KAAKzB,0BAAL,CAAgC4B,GAAhC,CAAoCH,eAApC,CAAJ,EAA0D;AACxD;AACA,aAAKzB,0BAAL,WAAuCyB,eAAvC;AACA,YAAIQ,QAAQ,GAAG,KAAKlC,gBAAL,CAAsBmC,SAAtB,CAAgC,UAASL,QAAT,EAAmB;AAChE,iBAAOA,QAAQ,CAACM,OAAT,KAAqBV,eAA5B;AACD,SAFc,CAAf;;AAGA,YAAIQ,QAAQ,KAAK,CAAC,CAAlB,EAAqB;AACnB;AACA,eAAKlC,gBAAL,CAAsBkC,QAAtB,EAAgCG,OAAhC,GAFmB,CAGnB;;AACA,eAAKrC,gBAAL,CAAsBsC,MAAtB,CAA6BJ,QAA7B,EAAuC,CAAvC;AACD;AACF;AACF;;;iDAE4BK,gB,EAAkB;AAC7C,UAAIC,kBAAkB,GAAG,IAAItC,GAAJ,CAAQqC,gBAAR,CAAzB;;AACA,WAAK,IAAI/B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKR,gBAAL,CAAsBU,MAA1C,EAAkD,EAAEF,CAApD,EAAuD;AACrD,YAAIgC,kBAAkB,CAACX,GAAnB,CAAuB,KAAK7B,gBAAL,CAAsBQ,CAAtB,EAAyB4B,OAAhD,CAAJ,EAA8D;AAC5D;AACA,eAAKnC,0BAAL,WAAuC,KAAKD,gBAAL,CAAsBQ,CAAtB,EAAyB4B,OAAhE,EAF4D,CAG5D;;AACA,eAAKpC,gBAAL,CAAsBQ,CAAtB,EAAyB6B,OAAzB,GAJ4D,CAK5D;;AACA,eAAKrC,gBAAL,CAAsBQ,CAAtB,IAA2B,SAA3B;AACD;AACF,OAX4C,CAY7C;;;AACA,WAAKR,gBAAL,GAAwB,KAAKA,gBAAL,CAAsByC,MAAtB,CAA6B,UAASX,QAAT,EAAmB;AACtE,eAAOA,QAAQ,KAAK,SAApB;AACD,OAFuB,CAAxB;AAGD;;;4BAEO;AACN;AACA,WAAKpC,UAAL,CAAgBY,OAAhB,CAAwB,KAAKoC,qBAA7B,EAAoD,IAApD;AACA,WAAK9B,MAAL,GAAc,SAAd;AACD;;;2BAEM;AACL;AACA,WAAKlB,UAAL,CAAgBY,OAAhB,CAAwB,KAAKqC,uBAA7B,EAAsD,IAAtD;AACA,WAAK/B,MAAL,GAAc,SAAd;AACD;;;kCAEaxB,iB,EAAkD;AAAA,UAA/BE,sBAA+B,uEAAN,IAAM;AAC9D;AACA,UAAIC,oBAAoB,GAAGC,QAAQ,CAACC,gBAAT,CAA0BL,iBAA1B,CAA3B;AACAG,0BAAoB,CAACe,OAArB,CAA6B,UAASC,SAAT,EAAoB;AAC/C;AACA,YAAIqC,GAAG,GAAG,KAAKlD,UAAL,CAAgBmD,OAAhB,CAAwBtC,SAAxB,CAAV;;AACA,YAAIqC,GAAG,IAAI,CAAX,EAAc;AACZ;AACD;;AACD,aAAKlD,UAAL,CAAgBsC,IAAhB,CAAqBzB,SAArB,EAN+C,CAO/C;;AACA,YAAIjB,sBAAJ,EAA4B;AAC1B,eAAK,IAAIkB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,SAAS,CAACE,QAAV,CAAmBC,MAAvC,EAA+C,EAAEF,CAAjD,EAAoD;AAClD,iBAAKG,4BAAL,CAAkCJ,SAAS,CAACE,QAAV,CAAmBD,CAAnB,CAAlC;AACD;AACF,SAZ8C,CAa/C;;;AACA,YAAI,KAAKI,MAAL,KAAgB,SAApB,EAA+B;AAC7B,eAAK8B,qBAAL,CAA2BnC,SAA3B;AACD;AACF,OAjBD,EAiBG,IAjBH;AAkBD;;;qCAEgBnB,iB,EAAqD;AAAA,UAAlC0D,yBAAkC,uEAAN,IAAM;AACpE;AACA,UAAIvD,oBAAoB,GAAGC,QAAQ,CAACC,gBAAT,CAA0BL,iBAA1B,CAA3B;AACAG,0BAAoB,CAACe,OAArB,CAA6B,UAASC,SAAT,EAAoB;AAC/C;AACA,YAAIqC,GAAG,GAAG,KAAKlD,UAAL,CAAgBmD,OAAhB,CAAwBtC,SAAxB,CAAV;;AACA,YAAIqC,GAAG,GAAG,CAAV,EAAa;AACX;AACD,SAL8C,CAM/C;;;AACA,YAAIE,yBAAJ,EAA+B;AAC7B,eAAKnB,4BAAL,CAAkCpB,SAAS,CAACE,QAA5C;AACD,SAT8C,CAU/C;;;AACA,YAAI,KAAKG,MAAL,KAAgB,SAApB,EAA+B;AAC7B,eAAK+B,uBAAL,CAA6BpC,SAA7B;AACD,SAb8C,CAc/C;;;AACA,aAAKb,UAAL,CAAgB4C,MAAhB,CAAuBM,GAAvB,EAA4B,CAA5B;AACD,OAhBD,EAgBG,IAhBH;AAiBD;;;0CAEqBrC,S,EAAW;AAC/BA,eAAS,CAACwC,gBAAV,CAA2B,WAA3B,EAAwC,KAAK5C,gBAA7C;AACAI,eAAS,CAACwC,gBAAV,CAA2B,OAA3B,EAAoC,KAAK1C,qBAAzC;AACD;;;4CAEuBE,S,EAAW;AACjCA,eAAS,CAACyC,mBAAV,CAA8B,OAA9B,EAAuC,KAAK3C,qBAA5C;AACAE,eAAS,CAACyC,mBAAV,CAA8B,WAA9B,EAA2C,KAAK7C,gBAAhD;AACD;;;qCAEgB8C,K,EAAO;AACtB,UAAI1C,SAAS,GAAG0C,KAAK,CAACC,aAAtB;AACA,UAAIC,mBAAmB,GAAGhE,SAAS,CAACiE,QAAV,CAAmBC,SAAnB,CAA6B;AAAEC,SAAC,EAAE/C,SAAS,CAACgD,WAAf;AAA4BC,SAAC,EAAEjD,SAAS,CAACkD;AAAzC,OAA7B,CAA1B,CAFsB,CAGtB;;AACA,UAAIC,QAAQ,GAAG;AAAEJ,SAAC,EAAEL,KAAK,CAACU,KAAN,GAAcpD,SAAS,CAACqD,UAA7B;AAAyCJ,SAAC,EAAEP,KAAK,CAACY,KAAN,GAActD,SAAS,CAACuD;AAApE,OAAf;AACA,WAAK9D,gBAAL,CAAsBM,OAAtB,CAA8B,UAAUwB,QAAV,EAAoB;AAChD,YAAIiC,YAAY,GAAG;AAAEC,eAAK,EAAElC,QAAQ,CAACM,OAAT,CAAiBmB,WAA1B;AAAuCU,gBAAM,EAAEnC,QAAQ,CAACM,OAAT,CAAiBqB;AAAhE,SAAnB;AACA,YAAIS,+BAA+B,GAAG;AACpCZ,WAAC,EAAExB,QAAQ,CAACqC,WAAT,CAAqBb,CAArB,GAAyBS,YAAY,CAACC,KAAb,GAAmB,GAAnB,GAAyB,CAAlD,GAAsDN,QAAQ,CAACJ,CAD9B;AAEpCE,WAAC,EAAE1B,QAAQ,CAACqC,WAAT,CAAqBX,CAArB,GAAyBO,YAAY,CAACE,MAAb,GAAoB,GAApB,GAA0B,CAAnD,GAAuDP,QAAQ,CAACF;AAF/B,SAAtC;AAIA,YAAIY,gCAAgC,GAAGjF,SAAS,CAACiE,QAAV,CAAmBC,SAAnB,CAA6Ba,+BAA7B,CAAvC;AACA,YAAIG,eAAe,GAAG,KAAKtD,wBAAL,CAA8BqD,gCAA9B,EAAgEL,YAAhE,EAA8EZ,mBAA9E,CAAtB;;AACA,YAAIkB,eAAe,KAAKC,GAAxB,EAA6B;AAC3BxC,kBAAQ,CAACM,OAAT,CAAiBmC,KAAjB,CAAuBC,OAAvB,GAAiC,MAAjC;AACD,SAFD,MAGK;AACH,cAAIC,qBAAqB,GAAG,KAAKlD,8BAAL,CAAoC2C,+BAApC,EAAqEG,eAArE,CAA5B;AACA,cAAIK,cAAc,GAAG;AACnBpB,aAAC,EAAExB,QAAQ,CAACqC,WAAT,CAAqBb,CAArB,GAAyBmB,qBAAqB,CAACnB,CAD/B;AAEnBE,aAAC,EAAE1B,QAAQ,CAACqC,WAAT,CAAqBX,CAArB,GAAyBiB,qBAAqB,CAACjB;AAF/B,WAArB;;AAIA,cAAI1B,QAAQ,CAACM,OAAT,CAAiBmC,KAAjB,CAAuBC,OAAvB,KAAmC,MAAvC,EAA+C;AAC7C1C,oBAAQ,CAACM,OAAT,CAAiBmC,KAAjB,CAAuBC,OAAvB,GAAiC,EAAjC;AACD;;AACD1C,kBAAQ,CAACM,OAAT,CAAiBmC,KAAjB,CAAuBI,IAAvB,GAA8BD,cAAc,CAACpB,CAA7C;AACAxB,kBAAQ,CAACM,OAAT,CAAiBmC,KAAjB,CAAuBK,GAAvB,GAA6BF,cAAc,CAAClB,CAA5C;AACD;AACF,OAvBD,EAuBG,IAvBH;AAwBD;;;0CAEqBP,K,EAAO;AAC3B,UAAI4B,UAAU,GAAG,KAAK7E,gBAAL,CAAsB8E,GAAtB,CAA0B,UAAUhD,QAAV,EAAoBc,GAApB,EAAyB;AAClE,YAAImC,cAAc,GAAG,EAArB;AACA,YAAIC,EAAE,GAAGlD,QAAQ,CAACM,OAAT,CAAiB6C,YAAjB,CAA8B,IAA9B,CAAT;AACAF,sBAAc,uBAAgBC,EAAE,KAAK,IAAP,GAAcA,EAAd,GAAmBpC,GAAnC,OAAd;AACAmC,sBAAc,2BAAoBjD,QAAQ,CAACqC,WAAT,CAAqBb,CAAzC,OAAd;AACAyB,sBAAc,2BAAoBjD,QAAQ,CAACqC,WAAT,CAAqBX,CAAzC,OAAd;AACAuB,sBAAc,2BAAd;AACA,eAAOA,cAAP;AACD,OARgB,EAQdG,IARc,CAQT,EARS,CAAjB;AASAC,WAAK,CAACN,UAAD,CAAL;AACD;;;6CAEwBO,gB,EAAkBC,W,EAAalC,mB,EAAqBmC,M,EAAQ;AACnF,UAAIA,MAAM,KAAKnE,SAAf,EAA0B;AACxBmE,cAAM,GAAG,KAAKjG,OAAL,CAAayB,YAAb,CAA0BG,IAAnC;AACD;;AACD,UAAIsE,QAAQ,GAAG,IAAf;;AACA,UAAID,MAAM,KAAKnE,SAAf,EAA0B;AACxBoE,gBAAQ,GAAGpG,SAAS,CAAC4B,wBAAV,CAAmCC,cAAnC,CAAkDsE,MAAlD,CAAX;AACD,OAFD,MAGK;AACHC,gBAAQ,GAAGpG,SAAS,CAAC4B,wBAAV,CAAmCC,cAAnC,CAAkDwE,aAA7D;AACD;;AACD,aAAOD,QAAQ,CACb,KAAKlG,OAAL,CAAayB,YAAb,CAA0BI,KADb,EAEb,KAAK7B,OAAL,CAAayB,YAAb,CAA0BM,MAFb,EAGb,KAAK/B,OAAL,CAAayB,YAAb,CAA0BO,KAHb,CAAR,CAIL+D,gBAJK,EAIaC,WAJb,EAI0BlC,mBAJ1B,CAAP;AAKD;;;mDAE8BsC,uB,EAAyBpB,e,EAAiBiB,M,EAAQ;AAC/E,UAAIA,MAAM,KAAKnE,SAAf,EAA0B;AACxBmE,cAAM,GAAG,KAAKjG,OAAL,CAAaiC,kBAAb,CAAgCL,IAAzC;AACD;;AACD,UAAIsE,QAAQ,GAAG,IAAf;;AACA,UAAID,MAAM,KAAKnE,SAAf,EAA0B;AACxBoE,gBAAQ,GAAGpG,SAAS,CAACoC,8BAAV,CAAyCP,cAAzC,CAAwDsE,MAAxD,CAAX;AACD,OAFD,MAGK;AACHC,gBAAQ,GAAGpG,SAAS,CAACoC,8BAAV,CAAyCP,cAAzC,CAAwD0E,kBAAnE;AACD;;AACD,aAAOH,QAAQ,CACb,KAAKlG,OAAL,CAAaiC,kBAAb,CAAgCE,eADnB,CAAR,CAELiE,uBAFK,EAEoBpB,eAFpB,CAAP;AAGD;;;;;;;AAGHlF,SAAS,CAACiE,QAAV,GAAqB;AACnBuC,aAAW,EAAE,qBAASC,MAAT,EAAiBC,MAAjB,EAAyB;AACpC,WAAOC,IAAI,CAACC,IAAL,CAAUD,IAAI,CAACE,GAAL,CAASJ,MAAM,CAACtC,CAAP,GAAWuC,MAAM,CAACvC,CAA3B,EAA8B,CAA9B,IAAmCwC,IAAI,CAACE,GAAL,CAASJ,MAAM,CAACpC,CAAP,GAAWqC,MAAM,CAACrC,CAA3B,EAA8B,CAA9B,CAA7C,CAAP;AACD,GAHkB;AAInBH,WAAS,EAAE,mBAAS4C,KAAT,EAAgB;AACzB,WAAOH,IAAI,CAACC,IAAL,CAAUE,KAAK,CAAC3C,CAAN,GAAQ2C,KAAK,CAAC3C,CAAd,GAAkB2C,KAAK,CAACzC,CAAN,GAAQyC,KAAK,CAACzC,CAA1C,CAAP;AACD;AANkB,CAArB;AASArE,SAAS,CAAC4B,wBAAV,GAAqC;AACnCC,gBAAc,EAAE;AACdkF,WAAO,EAAE,mBAAmE;AAAA,UAA1DC,WAA0D,uEAA9C,GAA8C;AAAA,UAAzCC,YAAyC,uEAA5B,GAA4B;AAAA,UAAvBC,WAAuB,uEAAXlF,SAAW;AAC1E,aAAO,UAASiE,gBAAT,EAA2BC,WAA3B,EAAwClC,mBAAxC,EAA6D;AAClE,YAAIiC,gBAAgB,KAAK,CAAzB,EAA4B;AAC1B,iBAAOd,GAAP;AACD,SAFD,MAGK;AACH,iBAAQnB,mBAAmB,GAACgD,WAApB,GAAgC,GAAjC,GAAsCf,gBAAtC,GAAyDgB,YAAhE;AACD;AACF,OAPD;AAQD,KAVa;AAWdE,eAAW,EAAE,uBAAqE;AAAA,UAA5DH,WAA4D,uEAAhD,IAAgD;AAAA,UAA1CC,YAA0C,uEAA7B,IAA6B;AAAA,UAAvBC,WAAuB,uEAAXlF,SAAW;AAChF,aAAO,UAASiE,gBAAT,EAA2BC,WAA3B,EAAwClC,mBAAxC,EAA6D;AAClE,eAAO2C,IAAI,CAACS,GAAL,CAASJ,WAAW,GAACf,gBAAgB,GAAC,GAAjB,GAAqBjC,mBAA1C,IAAiEiD,YAAxE;AACD,OAFD;AAGD,KAfa;AAgBdZ,iBAAa,EAAE,yBAA6D;AAAA,UAApDW,WAAoD,uEAAxC,GAAwC;AAAA,UAAnCC,YAAmC,uEAAtB,GAAsB;AAAA,UAAjBC,WAAiB,uEAAL,GAAK;AAC1E,aAAO,UAASjB,gBAAT,EAA2BC,WAA3B,EAAwClC,mBAAxC,EAA6D;AAClE,YAAIiC,gBAAgB,KAAK,CAAzB,EAA4B;AAC1B,iBAAOd,GAAP;AACD,SAFD,MAGK;AACH,iBAASnB,mBAAmB,GAACgD,WAApB,GAAgC,GAAjC,GAAsCL,IAAI,CAACE,GAAL,CAASZ,gBAAgB,GAAC,GAA1B,EAA+BiB,WAA/B,CAAtC,GAAoFD,YAA5F;AACD;AACF,OAPD;AAQD;AAzBa;AADmB,CAArC;AA8BAjH,SAAS,CAACoC,8BAAV,GAA2C;AACzCP,gBAAc,EAAE;AACd0E,sBAAkB,EAAE,8BAAsC;AAAA,UAA7Bc,sBAA6B,uEAAN,IAAM;AACxD,aAAO,UAASf,uBAAT,EAAkCpB,eAAlC,EAAmD;AACxD,YAAIjD,MAAM,GAAG;AACXkC,WAAC,EAAEmC,uBAAuB,CAACnC,CAAxB,GAA0Be,eADlB;AAEXb,WAAC,EAAEiC,uBAAuB,CAACjC,CAAxB,GAA0Ba;AAFlB,SAAb;;AAIA,YAAIlF,SAAS,CAACiE,QAAV,CAAmBC,SAAnB,CAA6BjC,MAA7B,IAAuCoF,sBAA3C,EAAmE;AACjE,cAAIC,UAAU,GAAGtH,SAAS,CAACiE,QAAV,CAAmBC,SAAnB,CAA6BoC,uBAA7B,CAAjB;AACA,cAAIiB,WAAW,GAAIF,sBAAsB,GAAGC,UAA5C;AACA,iBAAO;AACLnD,aAAC,EAAEmC,uBAAuB,CAACnC,CAAxB,GAA0BoD,WADxB;AAELlD,aAAC,EAAEiC,uBAAuB,CAACjC,CAAxB,GAA0BkD;AAFxB,WAAP;AAID,SAPD,MAQK;AACH,iBAAOtF,MAAP;AACD;AACF,OAhBD;AAiBD,KAnBa;AAoBduF,0BAAsB,EAAE,kCAAsC;AAAA,UAA7BH,sBAA6B,uEAAN,IAAM;AAC5D,aAAO,UAASf,uBAAT,EAAkCpB,eAAlC,EAAmD;AACxD,YAAIjD,MAAM,GAAG;AACXkC,WAAC,EAAEmC,uBAAuB,CAACnC,CAAxB,GAA0Be,eADlB;AAEXb,WAAC,EAAEiC,uBAAuB,CAACjC,CAAxB,GAA0Ba;AAFlB,SAAb;;AAIA,YAAIA,eAAe,GAAGmC,sBAAtB,EAA8C;AAC5C,iBAAO;AACLlD,aAAC,EAAEmC,uBAAuB,CAACnC,CAAxB,GAA0BkD,sBADxB;AAELhD,aAAC,EAAEiC,uBAAuB,CAACjC,CAAxB,GAA0BgD;AAFxB,WAAP;AAID,SALD,MAMK;AACH,iBAAOpF,MAAP;AACD;AACF,OAdD;AAeD,KApCa;AAqCdwF,YAAQ,EAAE,oBAA2C;AAAA,UAAlCJ,sBAAkC,uEAAXrF,SAAW;AACnD,aAAO,UAASsE,uBAAT,EAAkCpB,eAAlC,EAAmD;AACxD,eAAO;AACLf,WAAC,EAAEmC,uBAAuB,CAACnC,CAAxB,GAA0Be,eADxB;AAELb,WAAC,EAAEiC,uBAAuB,CAACjC,CAAxB,GAA0Ba;AAFxB,SAAP;AAID,OALD;AAMD;AA5Ca;AADyB,CAA3C;AAiDAlF,SAAS,CAAC0H,GAAV,GAAgB;AACdC,YAAU,EAAE,oBAAS1E,OAAT,EAAkB;AAC5B,QAAI2E,IAAI,GAAG3E,OAAO,CAAC4E,qBAAR,EAAX;AACA,QAAIC,UAAU,GAAGC,MAAM,CAACC,WAAP,IAAsB3H,QAAQ,CAAC4H,eAAT,CAAyBH,UAAhE;AACA,QAAII,SAAS,GAAGH,MAAM,CAACI,WAAP,IAAsB9H,QAAQ,CAAC4H,eAAT,CAAyBC,SAA/D;AACA,WAAO;AAAE/D,OAAC,EAAEyD,IAAI,CAACpC,IAAL,GAAYsC,UAAjB;AAA6BzD,OAAC,EAAEuD,IAAI,CAACnC,GAAL,GAAWyC;AAA3C,KAAP;AACD,GANa;AAOdE,WAAS,EAAE,mBAASnF,OAAT,EAAkBoF,UAAlB,EAA8B;AACvC,WAAO;AACLlE,OAAC,EAAElB,OAAO,CAACwB,UAAR,GAAqBxB,OAAO,CAACmB,WAAR,GAAsB,CAA3C,IAAgDiE,UAAU,GAAGA,UAAU,CAAC5D,UAAd,GAA2B,CAArF,CADE;AAELJ,OAAC,EAAEpB,OAAO,CAAC0B,SAAR,GAAoB1B,OAAO,CAACqB,YAAR,GAAuB,CAA3C,IAAgD+D,UAAU,GAAGA,UAAU,CAAC1D,SAAd,GAA0B,CAApF;AAFE,KAAP;AAID;AAZa,CAAhB;;AAeA3E,SAAS,CAAC4C,QAAV;AACE,kBAAYK,OAAZ,EAAqB;AAAA;;AACnB,SAAKA,OAAL,GAAeA,OAAf;AACA,SAAK+B,WAAL,GAAmB;AACjBb,OAAC,EAAElB,OAAO,CAACwB,UADM;AAEjBJ,OAAC,EAAEpB,OAAO,CAAC0B;AAFM,KAAnB;AAID;;AAPH;AAAA;AAAA,8BAQY,CACR;AACD;AAVH;;AAAA;AAAA,I","file":"avoidance.amd.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","// avoidance v0.1.0\r\n// AUTHOR: Stephen Zhao\r\n// REPO: github.com/stephen-zhao/sophii.co\r\n\r\n// A standalone library for creating \"avoidance cloud\" effect.\r\n// All children of given containers will be animated to avoid the user's mouse.\r\n\r\n// The class which exposes the public API\r\nexport default class Avoidance {\r\n  // input:\r\n  //   containerSelector\r\n  //    - css-selector string which specifies the elements\r\n  //      inside which the avoidance effect is triggered.\r\n  //   options\r\n  //    - an settings object that takes the following *optional* key/values:\r\n  //      factorMethod: {\r\n  //        name: one of \"inverse\", \"power_inverse\", or \"exponential\"\r\n  //        scale: a number\r\n  //        offset: a number\r\n  //        power: a number\r\n  //      }\r\n  //      displacementMethod: {\r\n  //        name: one of \"standard\", \"proportional_threshold\", or \"absolute_threshold\"\r\n  //        thresholdRadius: a number\r\n  //      }\r\n  //   addChildrenAsParticles\r\n  //    - boolean which specifies whether or not the children\r\n  //      of the containers are added initially as tracked\r\n  //      particles. Defaults to true.\r\n  constructor(containerSelector, options = {}, addChildrenAsParticles = true) {\r\n    // save the containers\r\n    var containersCollection = document.querySelectorAll(containerSelector);\r\n    this.containers = Array.prototype.slice.call(containersCollection);\r\n    // save options for future use\r\n    this.options = this.initOptions(options);\r\n    // init tracked particles\r\n    this.trackedParticles = [];\r\n    this.trackedParticleElementsSet = new Set();\r\n    // \"fix\" event listeners\r\n    this.mouseMoveHandler = this.mouseMoveHandler.bind(this);\r\n    this.mouseClickTestHandler = this.mouseClickTestHandler.bind(this);\r\n    // Create particles from all of the container's children\r\n    // and add them to the list of tracked particles, if specified to do so\r\n    if (addChildrenAsParticles) {\r\n      this.containers.forEach(function (container) {\r\n        for (var i = 0; i < container.children.length; ++i) {\r\n          this.startTrackingParticleElement(container.children[i]);\r\n        }\r\n      }, this);\r\n    }\r\n    // set the initial status\r\n    this.status = \"ready\";\r\n  }\r\n\r\n  initOptions(userOptions) {\r\n    var options = {};\r\n\r\n    // Process factorMethod option\r\n    options.factorMethod = {};\r\n    if (\"factorMethod\" in userOptions) {\r\n      if (typeof userOptions.factorMethod === \"string\"\r\n          && (userOptions.factorMethod in Avoidance.calculateAvoidanceFactor.builtinMethods)) {\r\n        options.factorMethod.name = userOptions.factorMethod;\r\n        options.factorMethod.scale = undefined;\r\n        options.factorMethod.offset = undefined;\r\n        options.factorMethod.power = undefined;\r\n      }\r\n      else if (typeof userOptions.factorMethod === \"object\") {\r\n        if ((\"name\" in userOptions.factorMethod)\r\n            && (typeof userOptions.factorMethod.name === \"string\")\r\n            && (userOptions.factorMethod.name in Avoidance.calculateAvoidanceFactor.builtinMethods)) {\r\n          options.factorMethod.name = userOptions.factorMethod.name;\r\n        }\r\n        else {\r\n          options.factorMethod.name = undefined;\r\n        }\r\n        if ((\"scale\" in userOptions.factorMethod)\r\n            && (typeof userOptions.factorMethod.scale === \"number\")) {\r\n          options.factorMethod.scale = userOptions.factorMethod.scale;\r\n        }\r\n        else {\r\n          options.factorMethod.scale = undefined;\r\n        }\r\n        if ((\"offset\" in userOptions.factorMethod)\r\n            && (typeof userOptions.factorMethod.offset === \"number\")) {\r\n          options.factorMethod.offset = userOptions.factorMethod.offset;\r\n        }\r\n        else {\r\n          options.factorMethod.offset = undefined;\r\n        }\r\n        if ((\"power\" in userOptions.factorMethod)\r\n            && (typeof userOptions.factorMethod.power === \"number\")) {\r\n          options.factorMethod.power = userOptions.factorMethod.power;\r\n        }\r\n        else {\r\n          options.factorMethod.power = undefined;\r\n        }\r\n      }\r\n      else {\r\n        options.factorMethod.name = undefined;\r\n        options.factorMethod.scale = undefined;\r\n        options.factorMethod.offset = undefined;\r\n        options.factorMethod.power = undefined;\r\n      }\r\n    }\r\n\r\n    // Process displacementMethod\r\n    options.displacementMethod = {};\r\n    if (\"displacementMethod\" in userOptions) {\r\n      if (typeof userOptions.displacementMethod === \"string\"\r\n          && (userOptions.displacementMethod in Avoidance.calculateAvoidanceDisplacement.builtinMethods)) {\r\n        options.displacementMethod.name = userOptions.displacementMethod;\r\n        options.displacementMethod.thresholdRadius = undefined;\r\n      }\r\n      else if (typeof userOptions.displacementMethod === \"object\") {\r\n        if ((\"name\" in userOptions.displacementMethod)\r\n            && (typeof userOptions.displacementMethod.name === \"string\")\r\n            && (userOptions.displacementMethod.name in Avoidance.calculateAvoidanceDisplacement.builtinMethods)) {\r\n          options.displacementMethod.name = userOptions.displacementMethod.name;\r\n        }\r\n        else {\r\n          options.displacementMethod.name = undefined;\r\n        }\r\n        if ((\"thresholdRadius\" in userOptions.displacementMethod)\r\n            && (typeof userOptions.displacementMethod.thresholdRadius === \"number\")) {\r\n          options.displacementMethod.thresholdRadius = userOptions.displacementMethod.thresholdRadius;\r\n        }\r\n        else {\r\n          options.displacementMethod.thresholdRadius = undefined;\r\n        }\r\n      }\r\n      else {\r\n        options.displacementMethod.name = undefined;\r\n        options.displacementMethod.thresholdRadius = undefined;\r\n      }\r\n    }\r\n\r\n    return options;\r\n  }\r\n\r\n  addParticles(particleSelector) {\r\n    document.querySelectorAll(particleSelector).forEach(this.startTrackingParticleElement, this);\r\n  }\r\n\r\n  addParticleElement(particleElement) {\r\n    this.startTrackingParticleElement(particleElement);\r\n  }\r\n\r\n  removeParticles(particleSelector) {\r\n    this.stopTrackingParticleElements(document.querySelectorAll(particleSelector));\r\n  }\r\n\r\n  removeParticleElement(particleElement) {\r\n    this.stopTrackingParticleElement(particleElement);\r\n  }\r\n\r\n  startTrackingParticleElement(particleElement) {\r\n    if (!this.trackedParticleElementsSet.has(particleElement)) {\r\n      var particle = new Avoidance.Particle(particleElement);\r\n      this.trackedParticles.push(particle);\r\n      this.trackedParticleElementsSet.add(particleElement);\r\n    }\r\n  }\r\n\r\n  stopTrackingParticleElement(particleElement) {\r\n    if (this.trackedParticleElementsSet.has(particleElement)) {\r\n      // First remove from lookup set\r\n      this.trackedParticleElementsSet.delete(particleElement);\r\n      var foundIdx = this.trackedParticles.findIndex(function(particle) {\r\n        return particle.element === particleElement;\r\n      });\r\n      if (foundIdx !== -1) {\r\n        // Then dispose\r\n        this.trackedParticles[foundIdx].dispose();\r\n        // Then remove from tracked particles\r\n        this.trackedParticles.splice(foundIdx, 1);\r\n      }\r\n    }\r\n  }\r\n\r\n  stopTrackingParticleElements(particleElements) {\r\n    var particleElementSet = new Set(particleElements);\r\n    for (var i = 0; i < this.trackedParticles.length; ++i) {\r\n      if (particleElementSet.has(this.trackedParticles[i].element)) {\r\n        // First remove from lookup set\r\n        this.trackedParticleElementsSet.delete(this.trackedParticles[i].element);\r\n        // Then dispose\r\n        this.trackedParticles[i].dispose();\r\n        // Then remove from tracked particles\r\n        this.trackedParticles[i] = \"removed\";\r\n      }\r\n    }\r\n    // Realize the removal\r\n    this.trackedParticles = this.trackedParticles.filter(function(particle) {\r\n      return particle !== \"removed\";\r\n    });\r\n  }\r\n\r\n  start() {\r\n    // Add all event handlers to each container\r\n    this.containers.forEach(this.registerEventHandlers, this);\r\n    this.status = \"running\";\r\n  }\r\n\r\n  stop() {\r\n    // remove all event handlers from each container\r\n    this.containers.forEach(this.deregisterEventHandlers, this);\r\n    this.status = \"stopped\";\r\n  }\r\n\r\n  addContainers(containerSelector, addChildrenAsParticles = true) {\r\n    // Split work by processing each selected container iteratively\r\n    var containersCollection = document.querySelectorAll(containerSelector);\r\n    containersCollection.forEach(function(container) {\r\n      // Only add if not already added\r\n      var idx = this.containers.indexOf(container);\r\n      if (idx >= 0) {\r\n        return;\r\n      }\r\n      this.containers.push(container);\r\n      // Add children as particles if specified to do so\r\n      if (addChildrenAsParticles) {\r\n        for (var i = 0; i < container.children.length; ++i) {\r\n          this.startTrackingParticleElement(container.children[i]);\r\n        }\r\n      }\r\n      // Register handlers if we are already running\r\n      if (this.status === \"running\") {\r\n        this.registerEventHandlers(container);\r\n      }\r\n    }, this);\r\n  }\r\n\r\n  removeContainers(containerSelector, removeChildrenAsParticles = true) {\r\n    // Process each selected container iteratively\r\n    var containersCollection = document.querySelectorAll(containerSelector);\r\n    containersCollection.forEach(function(container) {\r\n      // Process only if the container is tracked\r\n      var idx = this.containers.indexOf(container);\r\n      if (idx < 0) {\r\n        return;\r\n      }\r\n      // Remove children as particles if specified to do so\r\n      if (removeChildrenAsParticles) {\r\n        this.stopTrackingParticleElements(container.children);\r\n      }\r\n      // Deregister events if we are running\r\n      if (this.status === \"running\") {\r\n        this.deregisterEventHandlers(container);\r\n      }\r\n      // Remove from tracked containers\r\n      this.containers.splice(idx, 1);\r\n    }, this);\r\n  }\r\n\r\n  registerEventHandlers(container) {\r\n    container.addEventListener(\"mousemove\", this.mouseMoveHandler);\r\n    container.addEventListener(\"click\", this.mouseClickTestHandler);\r\n  }\r\n\r\n  deregisterEventHandlers(container) {\r\n    container.removeEventListener(\"click\", this.mouseClickTestHandler);\r\n    container.removeEventListener(\"mousemove\", this.mouseMoveHandler);\r\n  }\r\n\r\n  mouseMoveHandler(event) {\r\n    var container = event.currentTarget;\r\n    var containerSizeScalar = Avoidance.geometry.getRadius({ x: container.offsetWidth, y: container.offsetHeight });\r\n    // Determine the relative x and y of mouse position inside the container\r\n    var mousePos = { x: event.pageX - container.offsetLeft, y: event.pageY - container.offsetTop };\r\n    this.trackedParticles.forEach(function (particle) {\r\n      var particleSize = { width: particle.element.offsetWidth, height: particle.element.offsetHeight };\r\n      var particleOrigPosToCentreRelMouse = {\r\n        x: particle.originalPos.x + particleSize.width*1.0 / 2 - mousePos.x,\r\n        y: particle.originalPos.y + particleSize.height*1.0 / 2 - mousePos.y,\r\n      };\r\n      var particleOrigDistToCentreRelMouse = Avoidance.geometry.getRadius(particleOrigPosToCentreRelMouse);\r\n      var avoidanceFactor = this.calculateAvoidanceFactor(particleOrigDistToCentreRelMouse, particleSize, containerSizeScalar);\r\n      if (avoidanceFactor === NaN) {\r\n        particle.element.style.display = \"none\";\r\n      }\r\n      else {\r\n        var avoidanceDisplacement = this.calculateAvoidanceDisplacement(particleOrigPosToCentreRelMouse, avoidanceFactor);\r\n        var particleNewPos = {\r\n          x: particle.originalPos.x + avoidanceDisplacement.x,\r\n          y: particle.originalPos.y + avoidanceDisplacement.y,\r\n        };\r\n        if (particle.element.style.display === \"none\") {\r\n          particle.element.style.display = \"\";\r\n        }\r\n        particle.element.style.left = particleNewPos.x;\r\n        particle.element.style.top = particleNewPos.y;\r\n      }\r\n    }, this);\r\n  }\r\n\r\n  mouseClickTestHandler(event) {\r\n    var datastring = this.trackedParticles.map(function (particle, idx) {\r\n      var particleString = \"\";\r\n      var id = particle.element.getAttribute(\"id\");\r\n      particleString += `particle ${id !== null ? id : idx}\\n`;\r\n      particleString += `original x = ${particle.originalPos.x}\\n`;\r\n      particleString += `original y = ${particle.originalPos.y}\\n`;\r\n      particleString += `-------------------\\n`;\r\n      return particleString;\r\n    }).join(\"\");\r\n    alert(datastring);\r\n  }\r\n\r\n  calculateAvoidanceFactor(originalDistance, elementSize, containerSizeScalar, method) {\r\n    if (method === undefined) {\r\n      method = this.options.factorMethod.name;\r\n    }\r\n    var methodFn = null;\r\n    if (method !== undefined) {\r\n      methodFn = Avoidance.calculateAvoidanceFactor.builtinMethods[method];\r\n    }\r\n    else {\r\n      methodFn = Avoidance.calculateAvoidanceFactor.builtinMethods.power_inverse;\r\n    }\r\n    return methodFn(\r\n      this.options.factorMethod.scale,\r\n      this.options.factorMethod.offset,\r\n      this.options.factorMethod.power\r\n    )(originalDistance, elementSize, containerSizeScalar);\r\n  }\r\n  \r\n  calculateAvoidanceDisplacement(particleOrigPosRelMouse, avoidanceFactor, method) {\r\n    if (method === undefined) {\r\n      method = this.options.displacementMethod.name;\r\n    }\r\n    var methodFn = null;\r\n    if (method !== undefined) {\r\n      methodFn = Avoidance.calculateAvoidanceDisplacement.builtinMethods[method];\r\n    }\r\n    else {\r\n      methodFn = Avoidance.calculateAvoidanceDisplacement.builtinMethods.absolute_threshold;\r\n    }\r\n    return methodFn(\r\n      this.options.displacementMethod.thresholdRadius\r\n    )(particleOrigPosRelMouse, avoidanceFactor);\r\n  }\r\n}\r\n\r\nAvoidance.geometry = {\r\n  getDistance: function(pointA, pointB) {\r\n    return Math.sqrt(Math.pow(pointA.x - pointB.x, 2) + Math.pow(pointA.y - pointB.y, 2));\r\n  },\r\n  getRadius: function(point) {\r\n    return Math.sqrt(point.x*point.x + point.y*point.y);\r\n  },\r\n}\r\n\r\nAvoidance.calculateAvoidanceFactor = {\r\n  builtinMethods: {\r\n    inverse: function(param_scale=0.1, param_offset=0.0, param_power=undefined) {\r\n      return function(originalDistance, elementSize, containerSizeScalar) {\r\n        if (originalDistance === 0) {\r\n          return NaN;\r\n        }\r\n        else {\r\n          return (containerSizeScalar*param_scale*1.0)/originalDistance + param_offset;\r\n        }\r\n      }\r\n    },\r\n    exponential: function(param_scale=0.01, param_offset=0.25, param_power=undefined) {\r\n      return function(originalDistance, elementSize, containerSizeScalar) {\r\n        return Math.exp(param_scale-originalDistance*1.0/containerSizeScalar) + param_offset;\r\n      }\r\n    },\r\n    power_inverse: function(param_scale=1.0, param_offset=0.0, param_power=1.6) {\r\n      return function(originalDistance, elementSize, containerSizeScalar) {\r\n        if (originalDistance === 0) {\r\n          return NaN;\r\n        }\r\n        else {\r\n          return ((containerSizeScalar*param_scale*1.0)/Math.pow(originalDistance*1.0, param_power) + param_offset);\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nAvoidance.calculateAvoidanceDisplacement = {\r\n  builtinMethods: {\r\n    absolute_threshold: function(param_threshold_radius=80.0) {\r\n      return function(particleOrigPosRelMouse, avoidanceFactor) {\r\n        var offset = {\r\n          x: particleOrigPosRelMouse.x*avoidanceFactor,\r\n          y: particleOrigPosRelMouse.y*avoidanceFactor,\r\n        };\r\n        if (Avoidance.geometry.getRadius(offset) > param_threshold_radius) {\r\n          var origRadius = Avoidance.geometry.getRadius(particleOrigPosRelMouse);\r\n          var scaleFactor = (param_threshold_radius / origRadius);\r\n          return {\r\n            x: particleOrigPosRelMouse.x*scaleFactor,\r\n            y: particleOrigPosRelMouse.y*scaleFactor,\r\n          };\r\n        }\r\n        else {\r\n          return offset;\r\n        }\r\n      }\r\n    },\r\n    proportional_threshold: function(param_threshold_radius=20.0) {\r\n      return function(particleOrigPosRelMouse, avoidanceFactor) {\r\n        var offset = {\r\n          x: particleOrigPosRelMouse.x*avoidanceFactor,\r\n          y: particleOrigPosRelMouse.y*avoidanceFactor,\r\n        };\r\n        if (avoidanceFactor > param_threshold_radius) {\r\n          return {\r\n            x: particleOrigPosRelMouse.x*param_threshold_radius,\r\n            y: particleOrigPosRelMouse.y*param_threshold_radius,\r\n          };\r\n        }\r\n        else {\r\n          return offset;\r\n        }\r\n      }\r\n    },\r\n    standard: function(param_threshold_radius=undefined) {\r\n      return function(particleOrigPosRelMouse, avoidanceFactor) {\r\n        return {\r\n          x: particleOrigPosRelMouse.x*avoidanceFactor,\r\n          y: particleOrigPosRelMouse.y*avoidanceFactor,\r\n        };\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nAvoidance.dom = {\r\n  pageOffset: function(element) {\r\n    var rect = element.getBoundingClientRect();\r\n    var scrollLeft = window.pageXOffset || document.documentElement.scrollLeft;\r\n    var scrollTop = window.pageYOffset || document.documentElement.scrollTop;\r\n    return { x: rect.left + scrollLeft, y: rect.top + scrollTop }\r\n  },\r\n  getCentre: function(element, relativeTo) {\r\n    return {\r\n      x: element.offsetLeft + element.offsetWidth / 2 - (relativeTo ? relativeTo.offsetLeft : 0),\r\n      y: element.offsetTop + element.offsetHeight / 2 - (relativeTo ? relativeTo.offsetTop : 0),\r\n    };\r\n  }\r\n}\r\n\r\nAvoidance.Particle = class {\r\n  constructor(element) {\r\n    this.element = element;\r\n    this.originalPos = {\r\n      x: element.offsetLeft,\r\n      y: element.offsetTop,\r\n    };\r\n  }\r\n  dispose() {\r\n    // TODO: return particle to original location, either by setting style or removing location style\r\n  }\r\n}"],"sourceRoot":""}