<html>
  <head>
    <script src="../src/scripts/avoidance.js"></script>
    <style>
      .my-container-class {
        position: absolute;
        border: 2px solid goldenrod;
        background-color: black;
      }

      #my-container-0 {
        top: 50px;
        left: 50px;
        width: 1000px;
        height: 500px;
      }

      #my-container-1 {
        position: absolute;
        top: 50px;
        left: 1150px;
        width: 400px;
        height: 700px;
      }

      .my-container-class>div {
        position: absolute;
        width: 20px;
        height: 20px;
        background-color: cornflowerblue;
        border: 2px solid white;
        box-shadow: 0px 0px 10px 1px yellow;
      }
    </style>
  </head>
  <body>
    <div id="my-container-0" class="my-container-class">
    </div>
    <div id="my-container-1" class="my-container-class">
    </div>
    <div class="test-input-form">
      <input type="button" value="Add particle" id="add-particle-btn">
      <input type="button" value="Remove particle" id="remove-particle-btn">
    </div>
    <script>
      var NUM_OF_PARTICLES_EACH = 50;
      var NUM_OF_CONTAINERS = 1;
      (function() {

        var addParticles = function(containerSelector, n) {
          var particles = [];
          var container = document.querySelector(containerSelector);
          for (var i = 0; i < n; ++i) {
            var particle = document.createElement("div");
            particle.style.left = (container.offsetWidth * 0.1) + Math.random() * (container.offsetWidth * 0.8);
            particle.style.top = (container.offsetHeight * 0.1) + Math.random() * (container.offsetHeight * 0.8);
            container.appendChild(particle);
            particles.push(particle);
          }
          return particles;
        }

        var removeParticle = function(containerSelector) {
          var container = document.querySelector(containerSelector);
          if (container.children.length === 0) {
            return null;
          }
          var particle = container.children[0];
          container.removeChild(particle);
          return particle;
        }

        for (var containerIdx = 0; containerIdx < NUM_OF_CONTAINERS; ++containerIdx) {
          addParticles("#my-container-"+containerIdx, NUM_OF_PARTICLES_EACH);
        }

        document.getElementById("add-particle-btn").addEventListener("click", function() {
          var particles = addParticles("#my-container-0", 1);
          avoidance.addParticleElement(particles[0]);
        });

        document.getElementById("remove-particle-btn").addEventListener("click", function() {
          var particle = removeParticle("#my-container-0");
          if (particle) {
            avoidance.removeParticleElement(particle);
          }
        });

        var avoidance = new Avoidance(".my-container-class");
        avoidance.start();
        
      })();
    </script>
  </body>
</html>